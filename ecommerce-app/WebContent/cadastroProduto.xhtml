<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<title>Ecommerce do Poder</title>
	<meta name="author"
		content="Antônio Neto, Derick Irineu, Guilherme Brandão"></meta>
</h:head>
<h:body style="padding-top: 50px; padding-bottom: 20px;">
	<b:navBar brand="Ecommerce do Poder" href="index.xhtml" inverse="true"
		fixed="top" />
	<b:navbarLinks>
		<b:navLink value="Cadastro de Produtos" href="#"></b:navLink>
		<b:navLink value="Cadastro de Novos Usuarios" href="#"></b:navLink>
		<b:navLink value="Login | Cadastrar" href="cadastroLogin.xhtml"></b:navLink>
	</b:navbarLinks>
	<br></br>
				<br></br>
	<p:dataTable id="tabelaprodutos" var="produto"
		value="#{produtoBean.produtos}">
		<p:column headerText="Id">
		<h:outputText value="#{produto.id}" />
		</p:column>
		<p:column headerText="Codigo de Barra">
			<h:outputText value="#{produto.codigoDeBarra}" />
		</p:column>
		<p:column headerText="Nome">
			<h:outputText value="#{produto.nome}" />
		</p:column>
		<p:column headerText="Descrição">
			<h:outputText value="#{produto.descricao}" />
		</p:column>
		<p:column headerText="Preço">
			<h:outputText value="#{produto.preco}" />
		</p:column>
		  <p:column headerText="Ações">
						<!--  <p:commandLink title="Alterar" update="editaluno"
							oncomplete="PF('dialogEdicao').show();" immediate="true">
							<f:setPropertyActionListener target="#{produtoBean.produto}"
								value="#{produto}" />
						</p:commandLink>-->
						
		</p:column>
	</p:dataTable>
	
<br></br>
				<br></br>

	<!--        				A parti daqui tá funcionando                            -->
	<p:commandButton value="Cadastrar" type="button" id="cadastrar"
		onclick="PF('dialogCadastro').show();" />
	<p:dialog header="Cadastro de Produto" widgetVar="dialogCadastro"
		modal="true">
		<h:form id="formcadastro">
				<h:panelGrid columns="2" cellpadding="5">
				<p:outputLabel for="codigoDeBarra" value="Codigo de Barra" />
				<p:inputText id="codigoDeBarra"
					value="#{produtoBean.produto.codigoDeBarra}" />
			</h:panelGrid>
			<h:panelGrid columns="4" cellpadding="5">
				<p:outputLabel for="nome" value="Nome" />
				<p:inputText id="nome" value="#{produtoBean.produto.nome}" />
			</h:panelGrid>
			<h:panelGrid columns="4" cellpadding="5">
				<p:outputLabel for="descricao" value="Descricao" />
				<p:inputText id="descricao" value="#{produtoBean.produto.descricao}" />
				<p:outputLabel for="preco" value="preco" />
				<p:inputText id="preco" value="#{produtoBean.produto.preco}" />
			</h:panelGrid>
			<p:commandButton actionListener="#{produtoBean.cadastrarProduto}"
				value="Cadastrar" oncomplete="PF('dialogCadastro').hide();"/>
							</h:form>
	</p:dialog>
<!-- Até aqui -->

<!-- MODAL DE EDIÇÃO DO PRODUTO -->
<p:commandButton value="Editar" type="button" id="editar"
		onclick="PF('dialogEdicao').show();" />
		<p:dialog header="Editar Aluno" widgetVar="dialogEdicao" modal="true"
			id="editaluno">
				<h:form id="formedicao">
				<h:panelGrid columns="2" cellpadding="5">
					<p:outputLabel for="codigoDeBarra" value="Codigo de Barra" />
					<p:inputText id="codigoDeBarra" value="#{produtoBean.produto.codigoDeBarra}" />
				</h:panelGrid>
				<h:panelGrid columns="4" cellpadding="5">
				<p:outputLabel for="nome" value="Nome" />
				<p:inputText id="nome" value="#{produtoBean.produto.nome}" />
			</h:panelGrid>
			<h:panelGrid columns="4" cellpadding="5">
				<p:outputLabel for="descricao" value="Descricao" />
				<p:inputText id="descricao" value="#{produtoBean.produto.descricao}" />
				<p:outputLabel for="preco" value="preco" />
				<p:inputText id="preco" value="#{produtoBean.produto.preco}" />
			</h:panelGrid>
				<p:commandButton actionListener="#{produtoBean.edit}" value="Editar"
					update=":tabelaprodutos"
					oncomplete="PF('dialogEdicao').hide();" />
							</h:form>
		</p:dialog>

</h:body>

</html>